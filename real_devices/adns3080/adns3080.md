---
number headings: auto, first-level 1, max 6, 1.1
---

# 1 adns3080摄像头驱动示例

本驱动依赖于内核模块 `videobuf2_v4l2` 和 `videobuf2_vmalloc`

本驱动依赖于设备树机制，为arm架构设计。如需适配其他架构应当自行完成设备发现与匹配功能。

# 2 目录

```toc
```

# 3 特性与实现

运行效果：
	![[../../Resources/adns3080.gif]]

## 3.1 基本特性

插入内核模块前应当完成如下任务：
1. 通过设备树完成设备的spi总线配置。
2. 在对应spi总线下完成 `avago,adns-3080` 的配置，可见[adns3080设备树demo片段](https://github.com/h13-0/minimal-linux-drivers/real_devices/adns3080/adns3080-example.dtsi)，需要注意，<font color="#c00000">SPI的频率配置推荐为1Mhz</font>。
3. 编译并替换内核
4. 随后应当在：
	1. `/sys/class/spi_master/` 下可以找到对应的总线文件
	2. `/sys/bus/spi/devices` 下可以找到 `spi<bus>.<cs>` 格式的子设备

当插入内核模块后，应当出现如下特性：
1. spi驱动应当出现于路径： `/sys/bus/spi/drivers/adns3080` 
2. 找到子设备路径，并执行 `readlink /sys/bus/spi/devices/spi<bus>.<cs>/driver` 随后应当指向驱动文件 `../../../../../../bus/spi/drivers/adns3080`

## 3.2 驱动特性

本驱动为adns3080摄像头驱动示例，暂无光流特性。
